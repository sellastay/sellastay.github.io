<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pesquisa - SellaStay WebApp</title>
<link rel="icon" type="image/x-icon" href="img/lg.png">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<!-- Json manifest for mobile icon App -->
<link rel="manifest" href="js/manifest.json">
<meta name="theme-color" content="#000">
<style>
  :root{
    --bg:#f6f8fb;
    --card:#fff;
    --primary:#3e0163;
    --accent:#ff914d;
    --muted:#7b8794;
    --radius:12px;
    --shadow: 0 10px 30px rgba(18,33,48,0.08);
  }
  html,body{height:100%;}
  body{
    margin:0;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#eef4fb 0%, #f6f8fb 100%);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:32px;
    color:#0f1724;
  }

  .card{
    width:100%;
    max-width:760px;
    background:var(--card);
    border-radius:var(--radius);
    padding:28px;
    box-shadow:var(--shadow);
    overflow:hidden;
    position:relative;
  }

  .language-selector {
    position: absolute;
    top: 12px;
    right: 12px;
    display: flex;
    gap: 4px;
    background: rgba(255, 255, 255, 0.95);
    padding: 4px;
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    z-index: 1000;
  }

  .language-btn {
    background: transparent;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    padding: 6px 10px;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--muted);
    white-space: nowrap;
  }

  .language-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
  }

  .language-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
  }

  .topbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
    background-color: #ffffff;
    border-bottom: 1px solid #e5e5e5;
    margin-top: 30px;
   }

  .logo img {
    height: 40px;
    width: auto;
    display: block;
   }

  .brand{
    display:flex;
    gap:12px;
    align-items:center;
  }

  .title{
    font-size:18px;font-weight:700;color:var(--primary);
  }
  .subtitle{color:var(--muted);font-size:13px;}

  .progress-wrap{
    margin-top:10px;
  }
  .progress{
    width:100%;
    height:8px;
    background:#eef2f6;
    border-radius:999px;
    overflow:hidden;
  }
  .progress > .bar{
    height:100%;
    width:0%;
    background: linear-gradient(90deg,var(--accent), #ffd580);
    border-radius:999px;
    transition: width 300ms ease;
  }
  .question-wrap{
    display:flex;
    align-items:flex-start;
    gap:28px;
    margin-top:22px;
  }

  .step-indicator{
    min-width:56px;
    text-align:center;
  }
  .step-indicator .num{
    background:#f0f6fb;color:var(--primary);width:44px;height:44px;border-radius:10px;display:inline-flex;
    align-items:center;justify-content:center;font-weight:700;font-size:15px;
  }
  .step-indicator p{margin-top:8px;color:var(--muted);font-size:13px;}

  .question-body{flex:1;}
  .question-text{font-size:20px;font-weight:700;color:#0b2340;margin-bottom:8px;}
  .question-desc{color:var(--muted);font-size:13px;margin-bottom:16px;}

  .input, textarea {
    width: 95%;
    padding:12px 14px;
    border-radius:12px;
    border:1px solid #e6eef6;
    background:#fff;
    font-size:15px;
    outline:none;
    box-shadow:none;
    transition: box-shadow .15s ease, border-color .15s ease;
  }
  .input select {
    width: 100%;
    padding:12px 14px;
    border-radius:12px;
    border:1px solid #e6eef6;
    background:#fff;
    font-size:15px;
    outline:none;
    box-shadow:none;
    transition: box-shadow .15s ease, border-color .15s ease;
  }
  .input:focus, select:focus, textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 6px 20px rgba(32,58,67,0.06);
  }
  .row { display:flex; gap:12px; }
  .row .col { flex:1; }

  .actions{
    display:flex;
    justify-content:space-between;
    margin-top:18px;
    gap:12px;
  }
  .btn {
    padding:10px 16px;border-radius:10px;border:none;cursor:pointer;font-weight:700;
    box-shadow: 0 6px 18px rgba(20,40,60,0.06);
  }
  .btn.primary{
    background:#3e0163;
    color:#fff;
  }
  .btn:hover {
    background: #7202b7;
  }
  .btn.ghost{
    background:transparent;color:var(--primary);border:1px solid #eaf0f6;
  }

  .small { font-size:13px;color:var(--muted);margin-top:10px; }

  .thankyou{
    text-align:center;padding:40px 10px;
  }
  .thankyou h2{color:var(--primary);margin-bottom:8px;}
  .thankyou p{color:var(--muted); font-size:15px;}

  @media (max-width:768px){
    body {
      padding: 16px;
    }

    .card {
      padding: 20px 16px;
    }

    .language-selector {
      position: static;
      margin: 0 auto 16px;
      justify-content: center;
      width: fit-content;
    }

    .topbar {
      flex-direction: column;
      gap: 12px;
      padding: 16px;
      margin-top: 0;
    }

    .topbar > div:last-child {
      margin-left: 0 !important;
      text-align: center;
    }

    .question-wrap{
      flex-direction:column; 
      gap:12px;
    }

    .step-indicator{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .input, textarea {
      width: 100%;
    }

    .actions {
      flex-direction: column-reverse;
    }

    .actions > div:last-child {
      margin-left: 0 !important;
      width: 100%;
    }

    .btn {
      width: 100%;
    }
  }

  @media (max-width:480px){
    .language-btn {
      padding: 5px 8px;
      font-size: 10px;
    }

    .title {
      font-size: 16px;
    }

    .subtitle {
      font-size: 12px;
    }

    .question-text {
      font-size: 18px;
    }
  }
</style>
</head>
<body>
    <main class="card" role="main" aria-labelledby="surveyTitle">
        <div class="language-selector">
            <button class="language-btn active" data-lang="pt" title="Português">🇧🇷 PT</button>
            <button class="language-btn" data-lang="en" title="English">🇺🇸 EN</button>
            <button class="language-btn" data-lang="es" title="Español">🇪🇸 ES</button>
        </div>

        <div class="topbar">
            <div class="brand">
            <div class="logo">
                <img src="img/lg.png" alt="SellaStay" />
            </div>

            <div>
                <div class="title" data-i18n="survey_title">Pesquisa — SellaStay WebApp</div>
                <div class="subtitle" data-i18n="survey_subtitle">Ajude-nos a construir a melhor ferramenta para negociação de grupos</div>
            </div>
            </div>
            <div style="margin-left:auto; color:var(--muted); font-size:13px;" data-i18n="estimated_time">Tempo estimado: 3 minutos</div>
        </div>

        <div class="progress-wrap" aria-hidden="true">
            <div class="progress"><div class="bar" id="progressBar"></div></div>
        </div>

        <form id="surveyForm" autocomplete="off" novalidate>
            <div id="questionContainer" class="question-wrap" role="group" aria-live="polite"></div>

            <div class="actions" id="actions">
            <button type="button" class="btn ghost" id="backBtn" style="visibility:hidden;"><i class="fa fa-arrow-left"></i> <span data-i18n="back_btn">Voltar</span></button>
            <div style="margin-left:auto; display:flex; gap:12px;">
                <button type="button" class="btn ghost" id="skipBtn" style="display:none;" data-i18n="skip_btn">Pular</button>
                <button type="submit" class="btn primary" id="nextBtn"><span data-i18n="next_btn">Próximo</span> <i class="fa fa-arrow-right" style="margin-left:10px;"></i></button>
            </div>
            </div>

            <div class="small" id="stepMeta" aria-hidden="true"></div>
        </form>

        <div id="thankyou" class="thankyou" style="display:none;">
            <h2 data-i18n="thank_you_title">Obrigado! 🙏</h2>
            <p data-i18n="thank_you_text">Sua resposta foi registrada. Podemos entrar em contato para participar do piloto (se você optou por isso).</p>
            <p style="margin-top:12px;"><a id="restart" href="#" style="color:var(--primary); font-weight:700;" data-i18n="restart_link">Enviar outra resposta</a></p>
        </div>
    </main>

    <script>
        const translations = {
            pt: {
                survey_title: "Pesquisa — SellaStay WebApp",
                survey_subtitle: "Ajude-nos a construir a melhor ferramenta para negociação de grupos",
                estimated_time: "Tempo estimado: 3 minutos",
                back_btn: "Voltar",
                skip_btn: "Pular",
                next_btn: "Próximo",
                submit_btn: "Enviar",
                sending: "Enviando...",
                thank_you_title: "Obrigado! 🙏",
                thank_you_text: "Sua resposta foi registrada. Podemos entrar em contato para participar do piloto (se você optou por isso).",
                restart_link: "Enviar outra resposta",
                step_indicator: "Passo",
                question_of: "de",
                question_num: "Pergunta",
                validation_required: "Por favor responda esta pergunta.",
                validation_multiselect: "Por favor selecione ao menos uma opção.",
                validation_max_choices: "Você pode selecionar no máximo",
                validation_max_choices_end: "opções.",
                validation_scale: "Selecione um valor na escala.",
                error_send: "Ocorreu um erro ao enviar. Tente novamente mais tarde.",
                error_connection: "Falha ao enviar. Verifique sua conexão."
            },
            en: {
                survey_title: "Survey — SellaStay WebApp",
                survey_subtitle: "Help us build the best tool for group negotiations",
                estimated_time: "Estimated time: 3 minutes",
                back_btn: "Back",
                skip_btn: "Skip",
                next_btn: "Next",
                submit_btn: "Submit",
                sending: "Sending...",
                thank_you_title: "Thank you! 🙏",
                thank_you_text: "Your response has been recorded. We may contact you to participate in the pilot (if you opted for it).",
                restart_link: "Submit another response",
                step_indicator: "Step",
                question_of: "of",
                question_num: "Question",
                validation_required: "Please answer this question.",
                validation_multiselect: "Please select at least one option.",
                validation_max_choices: "You can select a maximum of",
                validation_max_choices_end: "options.",
                validation_scale: "Select a value on the scale.",
                error_send: "An error occurred while sending. Please try again later.",
                error_connection: "Failed to send. Check your connection."
            },
            es: {
                survey_title: "Encuesta — SellaStay WebApp",
                survey_subtitle: "Ayúdanos a construir la mejor herramienta para negociaciones de grupos",
                estimated_time: "Tiempo estimado: 3 minutos",
                back_btn: "Atrás",
                skip_btn: "Omitir",
                next_btn: "Siguiente",
                submit_btn: "Enviar",
                sending: "Enviando...",
                thank_you_title: "¡Gracias! 🙏",
                thank_you_text: "Su respuesta ha sido registrada. Podemos contactarle para participar en el piloto (si optó por ello).",
                restart_link: "Enviar otra respuesta",
                step_indicator: "Paso",
                question_of: "de",
                question_num: "Pregunta",
                validation_required: "Por favor responda esta pregunta.",
                validation_multiselect: "Por favor seleccione al menos una opción.",
                validation_max_choices: "Puede seleccionar un máximo de",
                validation_max_choices_end: "opciones.",
                validation_scale: "Seleccione un valor en la escala.",
                error_send: "Ocurrió un error al enviar. Intente nuevamente más tarde.",
                error_connection: "Error al enviar. Verifique su conexión."
            }
        };

        const questionsTranslations = {
            pt: {
                "Nome do hotel": "Nome do hotel",
                "Ex.: Hotel Aurora": "Ex.: Hotel Aurora",
                "Cidade / Estado": "Cidade / Estado",
                "Ex.: São Paulo, SP": "Ex.: São Paulo, SP",
                "Categoria do hotel": "Categoria do hotel",
                "Número aproximado de quartos": "Número aproximado de quartos",
                "Possui salas de eventos / reuniões?": "Possui salas de eventos / reuniões?",
                "Número médio de colaboradores no setor comercial / reservas": "Número médio de colaboradores no setor comercial / reservas",
                "Seu hotel já trabalha (ou deseja trabalhar) com negociação de tarifa para hospedagem em grupos e/ou eventos?": "Seu hotel já trabalha (ou deseja trabalhar) com negociação de tarifa para hospedagem em grupos e/ou eventos?",
                "Como atualmente recebem solicitações de orçamento de eventos e/ou hospedagem em grupo?": "Como atualmente recebem solicitações de orçamento de eventos e/ou hospedagem em grupo?",
                "Qual sistema o hotel utiliza hoje para registrar e acompanhar essas negociações?": "Qual sistema o hotel utiliza hoje para registrar e acompanhar essas negociações?",
                "Com que frequência o hotel recebe solicitações de grupos?": "Com que frequência o hotel recebe solicitações de grupos?",
                "Quem normalmente faz a gestão ou tratativa dessas solicitações?": "Quem normalmente faz a gestão ou tratativa dessas solicitações?",
                "Como o hotel acompanha o status e resultado das negociações?": "Como o hotel acompanha o status e resultado das negociações?",
                "Em média, quanto tempo leva da solicitação até o envio da proposta?": "Em média, quanto tempo leva da solicitação até o envio da proposta?",
                "Quais são os maiores desafios no processo de negociação de grupos? (selecione até 3)": "Quais são os maiores desafios no processo de negociação de grupos? (selecione até 3)",
                "Quão importante seria para você ter uma plataforma única que centraliza todas as negociações de grupos? (1 a 5)": "Quão importante seria para você ter uma plataforma única que centraliza todas as negociações de grupos? (1 a 5)",
                "O hotel sente necessidade de maior automatização de processos, tarefas, relatórios e etc?": "O hotel sente necessidade de maior automatização de processos, tarefas, relatórios e etc?",
                "Seria interessante testar gratuitamente uma ferramenta de gestão de grupos e eventos?": "Seria interessante testar gratuitamente uma ferramenta de gestão de grupos e eventos?",
                "Seria interessante também que esta ferramenta integrasse com seu sistema de reservas e outras ferramentas já utilizadas para monitoramento de dados?": "Seria interessante também que esta ferramenta integrasse com seu sistema de reservas e outras ferramentas já utilizadas para monitoramento de dados?",
                "Seria interessante também que houvesse integração com o seu e-mail e WhatsApp para facilitar processos e identificar automaticamente quando uma nova solicitação surgir?": "Seria interessante também que houvesse integração com o seu e-mail e WhatsApp para facilitar processos e identificar automaticamente quando uma nova solicitação surgir?",
                "Seria interessante também que esse sistema fizesse um mapeamento de eventos ao longo do ano que possam impactar a ocupação do seu hotel?": "Seria interessante também que esse sistema fizesse um mapeamento de eventos ao longo do ano que possam impactar a ocupação do seu hotel?",
                "Qual seria o principal benefício que você espera de uma ferramenta assim?": "Qual seria o principal benefício que você espera de uma ferramenta assim?",
                "Quais funcionalidades você considera essenciais? (selecione até 4)": "Quais funcionalidades você considera essenciais? (selecione até 4)",
                "Caso a ferramenta fosse por assinatura, quanto o hotel estaria disposto a investir?": "Caso a ferramenta fosse por assinatura, quanto o hotel estaria disposto a investir?",
                "Gostaria de participar como hotel piloto (fase de testes)?": "Gostaria de participar como hotel piloto (fase de testes)?",
                "Nome do responsável pelo setor de grupos/Eventos": "Nome do responsável pelo setor de grupos/Eventos",
                "Nome completo": "Nome completo",
                "E-mail do responsável": "E-mail do responsável",
                "email@hotel.com": "email@hotel.com",
                "Deseja deixar alguma sugestão ou comentário?": "Deseja deixar alguma sugestão ou comentário?",
                "Escreva aqui...": "Escreva aqui...",
                "Econômico": "Econômico",
                "Midscale": "Midscale",
                "Luxo": "Luxo",
                "Resort": "Resort",
                "Rede hoteleira": "Rede hoteleira",
                "Até 50": "Até 50",
                "51–100": "51–100",
                "101–200": "101–200",
                "Acima de 200": "Acima de 200",
                "Sim": "Sim",
                "Não": "Não",
                "Sim, definitivamente": "Sim, definitivamente",
                "Provavelmente sim": "Provavelmente sim",
                "Talvez": "Talvez",
                "Provavelmente não": "Provavelmente não",
                "Não, definitivamente": "Não, definitivamente",
                "1–2": "1–2",
                "3–5": "3–5",
                "Mais de 5": "Mais de 5",
                "E-mail": "E-mail",
                "WhatsApp": "WhatsApp",
                "Telefone": "Telefone",
                "Formulário no site": "Formulário no site",
                "Redes sociais": "Redes sociais",
                "Agências/OTAs": "Agências/OTAs",
                "Outro": "Outro",
                "Nenhum / Planilhas": "Nenhum / Planilhas",
                "CRM (Salesforce, Hubspot...)": "CRM (Salesforce, Hubspot...)",
                "PMS (Opera, Mews...)": "PMS (Opera, Mews...)",
                "Sistema próprio": "Sistema próprio",
                "Diariamente": "Diariamente",
                "Semanalmente": "Semanalmente",
                "Quinzenalmente": "Quinzenalmente",
                "Mensalmente": "Mensalmente",
                "Raramente": "Raramente",
                "Gerente de Vendas": "Gerente de Vendas",
                "Analista de Reservas": "Analista de Reservas",
                "Executivo de Contas": "Executivo de Contas",
                "Gerente Comercial": "Gerente Comercial",
                "Coordenador de Eventos": "Coordenador de Eventos",
                "Manualmente (planilhas, e-mails)": "Manualmente (planilhas, e-mails)",
                "Ferramenta de CRM": "Ferramenta de CRM",
                "Sistema de gestão interno": "Sistema de gestão interno",
                "Anotações e agendas": "Anotações e agendas",
                "Menos de 1h": "Menos de 1h",
                "1–3h": "1–3h",
                "3–6h": "3–6h",
                "6–12h": "6–12h",
                "12–24h": "12–24h",
                "Mais de 24h": "Mais de 24h",
                "Volume alto de solicitações": "Volume alto de solicitações",
                "Dificuldade em controlar o status de cada negociação": "Dificuldade em controlar o status de cada negociação",
                "Falta de integração entre ferramentas": "Falta de integração entre ferramentas",
                "Falta de histórico de negociações": "Falta de histórico de negociações",
                "Dificuldade em gerar relatórios": "Dificuldade em gerar relatórios",
                "Retrabalho / erros manuais": "Retrabalho / erros manuais",
                "Comunicação fragmentada com clientes": "Comunicação fragmentada com clientes",
                "Tempo excessivo em tarefas operacionais": "Tempo excessivo em tarefas operacionais",
                "Agilidade": "Agilidade",
                "Organização": "Organização",
                "Comunicação centralizada": "Comunicação centralizada",
                "Relatórios automáticos": "Relatórios automáticos",
                "Integração com sistemas": "Integração com sistemas",
                "Redução de erros": "Redução de erros",
                "Kanban de negociações": "Kanban de negociações",
                "Cálculo automático de cotação": "Cálculo automático de cotação",
                "Histórico de tratativas (FUP)": "Histórico de tratativas (FUP)",
                "Painel de indicadores": "Painel de indicadores",
                "Cadastro de agências e contatos": "Cadastro de agências e contatos",
                "Integração com PMS": "Integração com PMS",
                "Integração com e-mail": "Integração com e-mail",
                "Integração com WhatsApp": "Integração com WhatsApp",
            },
            en: {
                "Nome do hotel": "Hotel name",
                "Ex.: Hotel Aurora": "Ex.: Aurora Hotel",
                "Cidade / Estado": "City / State",
                "Ex.: São Paulo, SP": "Ex.: Miami, FL",
                "Categoria do hotel": "Hotel category",
                "Número aproximado de quartos": "Approximate number of rooms",
                "Possui salas de eventos / reuniões?": "Do you have event/meeting rooms?",
                "Número médio de colaboradores no setor comercial / reservas": "Average number of employees in sales/reservations",
                "Seu hotel já trabalha (ou deseja trabalhar) com negociação de tarifa para hospedagem em grupos e/ou eventos?": "Does your hotel already work (or wish to work) with rate negotiation for group accommodations and/or events?",
                "Como atualmente recebem solicitações de orçamento de eventos e/ou hospedagem em grupo?": "How do you currently receive event or group accommodation budget requests?",
                "Qual sistema o hotel utiliza hoje para registrar e acompanhar essas negociações?": "What system does the hotel use to register and track these negotiations?",
                "Com que frequência o hotel recebe solicitações de grupos?": "How often does the hotel receive group requests?",
                "Quem normalmente faz a gestão ou tratativa dessas solicitações?": "Who normally manages or handles these requests?",
                "Como o hotel acompanha o status e resultado das negociações?": "How does the hotel track the status and results of negotiations?",
                "Em média, quanto tempo leva da solicitação até o envio da proposta?": "On average, how long does it take from request to proposal submission?",
                "Quais são os maiores desafios no processo de negociação de grupos? (selecione até 3)": "What are the biggest challenges in group negotiation? (select up to 3)",
                "Quão importante seria para você ter uma plataforma única que centraliza todas as negociações de grupos? (1 a 5)": "How important would a single platform for group negotiations be? (1 to 5)",
                "O hotel sente necessidade de maior automatização de processos, tarefas, relatórios e etc?": "Does the hotel need greater automation of processes, tasks, reports, etc.?",
                "Seria interessante testar gratuitamente uma ferramenta de gestão de grupos e eventos?": "Would you be interested in testing a free group and event management tool?",
                "Seria interessante também que esta ferramenta integrasse com seu sistema de reservas e outras ferramentas já utilizadas para monitoramento de dados?": "Would it also be interesting if this tool integrated with your reservation system and other tools used for data monitoring?",
                "Seria interessante também que houvesse integração com o seu e-mail e WhatsApp para facilitar processos e identificar automaticamente quando uma nova solicitação surgir?": "Would it also be interesting to have integration with your email and WhatsApp to facilitate processes and automatically identify when a new request arises?",
                "Seria interessante também que esse sistema fizesse um mapeamento de eventos ao longo do ano que possam impactar a ocupação do seu hotel?": "Would it also be interesting if this system mapped events throughout the year that could impact your hotel's occupancy?",
                "Qual seria o principal benefício que você espera de uma ferramenta assim?": "What would be the main benefit you expect from such a tool?",
                "Quais funcionalidades você considera essenciais? (selecione até 4)": "What features do you consider essential? (select up to 4)",
                "Caso a ferramenta fosse por assinatura, quanto o hotel estaria disposto a investir?": "If subscription-based, how much would the hotel be willing to invest?",
                "Gostaria de participar como hotel piloto (fase de testes)?": "Would you like to participate as a pilot hotel (testing phase)?",
                "Nome do responsável pelo setor de grupos/Eventos": "Name of the groups/events department manager",
                "Nome completo": "Full name",
                "E-mail do responsável": "Manager's email",
                "email@hotel.com": "email@hotel.com",
                "Deseja deixar alguma sugestão ou comentário?": "Would you like to leave suggestions or comments?",
                "Escreva aqui...": "Write here...",
                "Econômico": "Economy",
                "Midscale": "Midscale",
                "Luxo": "Luxury",
                "Resort": "Resort",
                "Rede hoteleira": "Hotel chain",
                "Até 50": "Up to 50",
                "51–100": "51–100",
                "101–200": "101–200",
                "Acima de 200": "Above 200",
                "Sim": "Yes",
                "Não": "No",
                "Sim, definitivamente": "Yes, definitely",
                "Provavelmente sim": "Probably yes",
                "Talvez": "Maybe",
                "Provavelmente não": "Probably not",
                "Não, definitivamente": "No, definitely not",
                "1–2": "1–2",
                "3–5": "3–5",
                "Mais de 5": "More than 5",
                "E-mail": "Email",
                "WhatsApp": "WhatsApp",
                "Telefone": "Phone",
                "Formulário no site": "Website form",
                "Redes sociais": "Social media",
                "Agências/OTAs": "Agencies/OTAs",
                "Outro": "Other",
                "Nenhum / Planilhas": "None / Spreadsheets",
                "CRM (Salesforce, Hubspot...)": "CRM (Salesforce, Hubspot...)",
                "PMS (Opera, Mews...)": "PMS (Opera, Mews...)",
                "Sistema próprio": "Own system",
                "Diariamente": "Daily",
                "Semanalmente": "Weekly",
                "Quinzenalmente": "Biweekly",
                "Mensalmente": "Monthly",
                "Raramente": "Rarely",
                "Gerente de Vendas": "Sales Manager",
                "Analista de Reservas": "Reservations Analyst",
                "Executivo de Contas": "Account Executive",
                "Gerente Comercial": "Commercial Manager",
                "Coordenador de Eventos": "Events Coordinator",
                "Manualmente (planilhas, e-mails)": "Manually (spreadsheets, emails)",
                "Ferramenta de CRM": "CRM tool",
                "Sistema de gestão interno": "Internal management system",
                "Anotações e agendas": "Notes and calendars",
                "Menos de 1h": "Less than 1h",
                "1–3h": "1–3h",
                "3–6h": "3–6h",
                "6–12h": "6–12h",
                "12–24h": "12–24h",
                "Mais de 24h": "More than 24h",
                "Volume alto de solicitações": "High volume of requests",
                "Dificuldade em controlar o status de cada negociação": "Difficulty controlling negotiation status",
                "Falta de integração entre ferramentas": "Lack of tool integration",
                "Falta de histórico de negociações": "Lack of negotiation history",
                "Dificuldade em gerar relatórios": "Difficulty generating reports",
                "Retrabalho / erros manuais": "Rework / manual errors",
                "Comunicação fragmentada com clientes": "Fragmented client communication",
                "Tempo excessivo em tarefas operacionais": "Excessive time on operational tasks",
                "Agilidade": "Agility",
                "Organização": "Organization",
                "Comunicação centralizada": "Centralized communication",
                "Relatórios automáticos": "Automatic reports",
                "Integração com sistemas": "System integration",
                "Redução de erros": "Error reduction",
                "Kanban de negociações": "Negotiations Kanban",
                "Cálculo automático de cotação": "Automatic quote calculation",
                "Histórico de tratativas (FUP)": "Negotiation history (Follow-up)",
                "Painel de indicadores": "Dashboard",
                "Cadastro de agências e contatos": "Agency and contact registry",
                "Integração com PMS": "PMS integration",
                "Integração com e-mail": "Email integration",
                "Integração com WhatsApp": "WhatsApp integration",
            },
            es: {
                "Nome do hotel": "Nombre del hotel",
                "Ex.: Hotel Aurora": "Ej.: Hotel Aurora",
                "Cidade / Estado": "Ciudad / Estado",
                "Ex.: São Paulo, SP": "Ej.: Madrid, España",
                "Categoria do hotel": "Categoría del hotel",
                "Número aproximado de quartos": "Número aproximado de habitaciones",
                "Possui salas de eventos / reuniões?": "¿Tiene salas de eventos/reuniones?",
                "Número médio de colaboradores no setor comercial / reservas": "Número promedio de empleados en ventas/reservas",
                "Seu hotel já trabalha (ou deseja trabalhar) com negociação de tarifa para hospedagem em grupos e/ou eventos?": "¿Su hotel ya trabaja (o desea trabajar) con negociación de tarifas para hospedaje en grupos y/o eventos?",
                "Como atualmente recebem solicitações de orçamento de eventos e/ou hospedagem em grupo?": "¿Cómo reciben actualmente solicitudes de presupuesto de eventos u hospedaje en grupo?",
                "Qual sistema o hotel utiliza hoje para registrar e acompanhar essas negociações?": "¿Qué sistema usa el hotel para registrar y hacer seguimiento de estas negociaciones?",
                "Com que frequência o hotel recebe solicitações de grupos?": "¿Con qué frecuencia recibe el hotel solicitudes de grupos?",
                "Quem normalmente faz a gestão ou tratativa dessas solicitações?": "¿Quién normalmente gestiona estas solicitudes?",
                "Como o hotel acompanha o status e resultado das negociações?": "¿Cómo hace seguimiento el hotel al estado y resultado de las negociaciones?",
                "Em média, quanto tempo leva da solicitação até o envio da proposta?": "En promedio, ¿cuánto tiempo toma desde la solicitud hasta el envío de la propuesta?",
                "Quais são os maiores desafios no processo de negociação de grupos? (selecione até 3)": "¿Cuáles son los mayores desafíos en la negociación de grupos? (seleccione hasta 3)",
                "Quão importante seria para você ter uma plataforma única que centraliza todas as negociações de grupos? (1 a 5)": "¿Qué tan importante sería una plataforma única para negociaciones? (1 a 5)",
                "O hotel sente necessidade de maior automatização de processos, tarefas, relatórios e etc?": "¿Siente el hotel la necesidad de mayor automatización de procesos, tareas, reportes, etc.?",
                "Seria interessante testar gratuitamente uma ferramenta de gestão de grupos e eventos?": "¿Sería interesante probar gratuitamente una herramienta de gestión de grupos y eventos?",
                "Seria interessante também que esta ferramenta integrasse com seu sistema de reservas e outras ferramentas já utilizadas para monitoramento de dados?": "¿También sería interesante que esta herramienta se integrara con su sistema de reservas y otras herramientas utilizadas para monitoreo de datos?",
                "Seria interessante também que houvesse integração com o seu e-mail e WhatsApp para facilitar processos e identificar automaticamente quando uma nova solicitação surgir?": "¿También sería interesante tener integración con su email y WhatsApp para facilitar procesos e identificar automáticamente cuando surja una nueva solicitud?",
                "Seria interessante também que esse sistema fizesse um mapeamento de eventos ao longo do ano que possam impactar a ocupação do seu hotel?": "¿También sería interesante que este sistema mapeara eventos a lo largo del año que puedan impactar la ocupación de su hotel?",
                "Qual seria o principal benefício que você espera de uma ferramenta assim?": "¿Cuál sería el principal beneficio que espera de una herramienta así?",
                "Quais funcionalidades você considera essenciais? (selecione até 4)": "¿Qué funcionalidades considera esenciales? (seleccione hasta 4)",
                "Caso a ferramenta fosse por assinatura, quanto o hotel estaria disposto a investir?": "Si fuera por suscripción, ¿cuánto estaría dispuesto a invertir el hotel?",
                "Gostaria de participar como hotel piloto (fase de testes)?": "¿Le gustaría participar como hotel piloto (fase de pruebas)?",
                "Nome do responsável pelo setor de grupos/Eventos": "Nombre del responsable de grupos/Eventos",
                "Nome completo": "Nombre completo",
                "E-mail do responsável": "Email del responsable",
                "email@hotel.com": "email@hotel.com",
                "Deseja deixar alguma sugestão ou comentário?": "¿Desea dejar sugerencias o comentarios?",
                "Escreva aqui...": "Escriba aquí...",
                "Econômico": "Económico",
                "Midscale": "Escala media",
                "Luxo": "Lujo",
                "Resort": "Resort",
                "Rede hoteleira": "Cadena hotelera",
                "Até 50": "Hasta 50",
                "51–100": "51–100",
                "101–200": "101–200",
                "Acima de 200": "Más de 200",
                "Sim": "Sí",
                "Não": "No",
                "Sim, definitivamente": "Sí, definitivamente",
                "Provavelmente sim": "Probablemente sí",
                "Talvez": "Tal vez",
                "Provavelmente não": "Probablemente no",
                "Não, definitivamente": "No, definitivamente",
                "1–2": "1–2",
                "3–5": "3–5",
                "Mais de 5": "Más de 5",
                "E-mail": "Email",
                "WhatsApp": "WhatsApp",
                "Telefone": "Teléfono",
                "Formulário no site": "Formulario web",
                "Redes sociais": "Redes sociales",
                "Agências/OTAs": "Agencias/OTAs",
                "Outro": "Otro",
                "Nenhum / Planilhas": "Ninguno / Hojas de cálculo",
                "CRM (Salesforce, Hubspot...)": "CRM (Salesforce, Hubspot...)",
                "PMS (Opera, Mews...)": "PMS (Opera, Mews...)",
                "Sistema próprio": "Sistema propio",
                "Diariamente": "Diariamente",
                "Semanalmente": "Semanalmente",
                "Quinzenalmente": "Quincenalmente",
                "Mensalmente": "Mensualmente",
                "Raramente": "Raramente",
                "Gerente de Vendas": "Gerente de Ventas",
                "Analista de Reservas": "Analista de Reservas",
                "Executivo de Contas": "Ejecutivo de Cuentas",
                "Gerente Comercial": "Gerente Comercial",
                "Coordenador de Eventos": "Coordinador de Eventos",
                "Manualmente (planilhas, e-mails)": "Manualmente (hojas de cálculo, emails)",
                "Ferramenta de CRM": "Herramienta CRM",
                "Sistema de gestão interno": "Sistema de gestión interno",
                "Anotações e agendas": "Notas y agendas",
                "Menos de 1h": "Menos de 1h",
                "1–3h": "1–3h",
                "3–6h": "3–6h",
                "6–12h": "6–12h",
                "12–24h": "12–24h",
                "Mais de 24h": "Más de 24h",
                "Volume alto de solicitações": "Alto volumen de solicitudes",
                "Dificuldade em controlar o status de cada negociação": "Dificultad para controlar el estado de cada negociación",
                "Falta de integração entre ferramentas": "Falta de integración entre herramientas",
                "Falta de histórico de negociações": "Falta de historial de negociaciones",
                "Dificuldade em gerar relatórios": "Dificultad para generar reportes",
                "Retrabalho / erros manuais": "Retrabajo / errores manuales",
                "Comunicação fragmentada com clientes": "Comunicación fragmentada con clientes",
                "Tempo excessivo em tarefas operacionais": "Tiempo excesivo en tareas operacionales",
                "Agilidade": "Agilidad",
                "Organização": "Organización",
                "Comunicação centralizada": "Comunicación centralizada",
                "Relatórios automáticos": "Reportes automáticos",
                "Integração com sistemas": "Integración con sistemas",
                "Redução de erros": "Reducción de errores",
                "Kanban de negociações": "Kanban de negociaciones",
                "Cálculo automático de cotação": "Cálculo automático de cotización",
                "Histórico de tratativas (FUP)": "Historial de negociaciones (Seguimiento)",
                "Painel de indicadores": "Panel de indicadores",
                "Cadastro de agências e contatos": "Registro de agencias y contactos",
                "Integração com PMS": "Integración con PMS",
                "Integração com e-mail": "Integración con email",
                "Integração com WhatsApp": "Integración con WhatsApp",
            }
        };

        class LanguageManager {
            constructor() {
                this.currentLang = this.detectLanguage();
                this.init();
            }

            detectLanguage() {
                const saved = localStorage.getItem('sellastay-survey-language');
                if (saved && translations[saved]) return saved;
                const browserLang = navigator.language || navigator.userLanguage;
                const langCode = browserLang.split('-')[0].toLowerCase();
                const langMap = { 'pt': 'pt', 'en': 'en', 'es': 'es' };
                return langMap[langCode] || 'pt';
            }

            init() {
                this.updateLanguageButtons();
                this.translatePage();
                this.attachEventListeners();
            }

            updateLanguageButtons() {
                document.querySelectorAll('.language-btn').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.lang === this.currentLang);
                });
            }

            translatePage() {
                const texts = translations[this.currentLang];
                document.querySelectorAll('[data-i18n]').forEach(element => {
                    const key = element.dataset.i18n;
                    if (texts[key]) element.textContent = texts[key];
                });
                const langMap = { 'pt': 'pt-BR', 'en': 'en-US', 'es': 'es-ES' };
                document.documentElement.lang = langMap[this.currentLang];
                document.title = texts.survey_title;
            }

            switchLanguage(lang) {
                if (translations[lang]) {
                    this.currentLang = lang;
                    localStorage.setItem('sellastay-survey-language', lang);
                    this.updateLanguageButtons();
                    this.translatePage();
                    if (typeof currentIndex !== 'undefined' && currentIndex >= 0) {
                        renderQuestion(currentIndex);
                    }
                }
            }

            attachEventListeners() {
                document.querySelectorAll('.language-btn').forEach(btn => {
                    btn.addEventListener('click', () => this.switchLanguage(btn.dataset.lang));
                });
            }

            translate(text) {
                const currentTranslations = questionsTranslations[this.currentLang];
                return currentTranslations[text] || text;
            }
        }

        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwqUDCNOKue5blg0lzwGkrPE1SOqlUrNVe8Mi_IGy4bCCOrYj_PM-6o72OW2QuqV2FC/exec";

        const QUESTIONS = [
        { key: "nome_hotel", type: "text", label: "Nome do hotel", placeholder: "Ex.: Hotel Aurora", required: true },
        { key: "cidade_estado", type: "text", label: "Cidade / Estado", placeholder: "Ex.: São Paulo, SP", required: true },
        { key: "categoria", type: "select", label: "Categoria do hotel", options: ["Econômico","Midscale","Luxo","Resort","Rede hoteleira"], required: true },
        { key: "num_quartos", type: "select", label: "Número aproximado de quartos", options: ["Até 50","51–100","101–200","Acima de 200"], required: true },
        { key: "possui_salas", type: "select", label: "Possui salas de eventos / reuniões?", options: ["Sim","Não"], required: true },
        { key: "num_colaboradores", type: "select", label: "Número médio de colaboradores no setor comercial / reservas", options: ["1–2","3–5","Mais de 5"], required: true },
        { key: "trabalha_grupos", type: "select", label: "Seu hotel já trabalha (ou deseja trabalhar) com negociação de tarifa para hospedagem em grupos e/ou eventos?", options: ["Sim","Não","Talvez"], required: true },
        { key: "como_recebe_solicitacoes", type: "multiselect", label: "Como atualmente recebem solicitações de orçamento de eventos e/ou hospedagem em grupo?", options: ["E-mail","WhatsApp","Telefone","Formulário no site","Redes sociais","Agências/OTAs","Outro"], required: true },
        { key: "sistema_registro", type: "select", label: "Qual sistema o hotel utiliza hoje para registrar e acompanhar essas negociações?", options: ["Nenhum / Planilhas","CRM (Salesforce, Hubspot...)","PMS (Opera, Mews...)","Sistema próprio","Outro"], required: true },
        { key: "frequencia_solicitacoes", type: "select", label: "Com que frequência o hotel recebe solicitações de grupos?", options: ["Diariamente","Semanalmente","Quinzenalmente","Mensalmente","Raramente"], required: true },
        { key: "quem_gerencia", type: "select", label: "Quem normalmente faz a gestão ou tratativa dessas solicitações?", options: ["Gerente de Vendas","Analista de Reservas","Executivo de Contas","Gerente Comercial","Coordenador de Eventos","Outro"], required: true },
        { key: "acompanha_status", type: "select", label: "Como o hotel acompanha o status e resultado das negociações?", options: ["Manualmente (planilhas, e-mails)","Ferramenta de CRM","Sistema de gestão interno","Anotações e agendas","Outro"], required: true },
        { key: "tempo_ate_proposta", type: "select", label: "Em média, quanto tempo leva da solicitação até o envio da proposta?", options: ["Menos de 1h","1–3h","3–6h","6–12h","12–24h","Mais de 24h"], required: true },
        { key: "maiores_desafios", type: "multiselect", label: "Quais são os maiores desafios no processo de negociação de grupos? (selecione até 3)", options: ["Volume alto de solicitações","Dificuldade em controlar o status de cada negociação","Falta de integração entre ferramentas","Falta de histórico de negociações","Dificuldade em gerar relatórios","Retrabalho / erros manuais","Comunicação fragmentada com clientes","Tempo excessivo em tarefas operacionais","Outro"], maxChoices: 3, required: true },
        { key: "importancia_plataforma", type: "scale", label: "Quão importante seria para você ter uma plataforma única que centraliza todas as negociações de grupos? (1 a 5)", min:1, max:5, required:true },
        { key: "automatizacao", type: "select", label: "O hotel sente necessidade de maior automatização de processos, tarefas, relatórios e etc?", options:["Sim, definitivamente","Provavelmente sim","Talvez","Provavelmente não","Não, definitivamente"], required:true },
        { key: "interesse_teste", type: "select", label: "Seria interessante testar gratuitamente uma ferramenta de gestão de grupos e eventos?", options:["Sim, definitivamente","Provavelmente sim","Talvez","Provavelmente não","Não, definitivamente"], required:true },
        { key: "integracao_pms", type: "select", label: "Seria interessante também que esta ferramenta integrasse com seu sistema de reservas e outras ferramentas já utilizadas para monitoramento de dados?", options:["Sim, definitivamente","Provavelmente sim","Talvez","Provavelmente não","Não, definitivamente"], required:true },
        { key: "integracao_comunicacao", type: "select", label: "Seria interessante também que houvesse integração com o seu e-mail e WhatsApp para facilitar processos e identificar automaticamente quando uma nova solicitação surgir?", options:["Sim, definitivamente","Provavelmente sim","Talvez","Provavelmente não","Não, definitivamente"], required:true },
        { key: "mapeamento_eventos", type: "select", label: "Seria interessante também que esse sistema fizesse um mapeamento de eventos ao longo do ano que possam impactar a ocupação do seu hotel?", options:["Sim","Não"], required:true },
        { key: "principal_beneficio", type: "select", label: "Qual seria o principal benefício que você espera de uma ferramenta assim?", options:["Agilidade","Organização","Comunicação centralizada","Relatórios automáticos","Integração com sistemas","Redução de erros"], required:true },
        { key: "func_essenciais", type: "multiselect", label: "Quais funcionalidades você considera essenciais? (selecione até 4)", options:["Kanban de negociações","Cálculo automático de cotação","Histórico de tratativas (FUP)","Painel de indicadores","Cadastro de agências e contatos","Integração com PMS","Integração com e-mail","Integração com WhatsApp","Outro"], maxChoices: 4, required:true },
        { key: "preco_disposto", type: "text", label: "Caso a ferramenta fosse por assinatura, quanto o hotel estaria disposto a investir?", placeholder: "Ex.: R$700/mês", required:true },
        { key: "participar_piloto", type: "select", label: "Gostaria de participar como hotel piloto (fase de testes)?", options:["Sim","Não"], required:true },
        { key: "responsavel_nome", type: "text", label: "Nome do responsável pelo setor de grupos/Eventos", placeholder:"Nome completo", required:false },
        { key: "responsavel_email", type: "email", label: "E-mail do responsável", placeholder:"email@hotel.com", required:false },
        { key: "comentarios", type: "textarea", label: "Deseja deixar alguma sugestão ou comentário?", placeholder:"Escreva aqui...", required:false }
        ];

        let currentIndex = 0;
        const state = {};
        const Qcontainer = document.getElementById("questionContainer");
        const progressBar = document.getElementById("progressBar");
        const backBtn = document.getElementById("backBtn");
        const skipBtn = document.getElementById("skipBtn");
        const nextBtn = document.getElementById("nextBtn");
        const stepMeta = document.getElementById("stepMeta");
        const form = document.getElementById("surveyForm");
        const thankyou = document.getElementById("thankyou");
        const restart = document.getElementById("restart");

        function updateProgress(){
        const pct = Math.round((currentIndex) / QUESTIONS.length * 100);
        progressBar.style.width = pct + "%";
        const texts = translations[window.languageManager.currentLang];
        stepMeta.textContent = `${texts.question_num} ${Math.min(currentIndex+1, QUESTIONS.length)} ${texts.question_of} ${QUESTIONS.length}`;
        }

        function renderQuestion(idx){
        Qcontainer.innerHTML = "";
        const q = QUESTIONS[idx];
        if(!q) return;

        const stepDiv = document.createElement("div");
        stepDiv.className = "step-indicator";
        const stepText = translations[window.languageManager.currentLang].step_indicator;
        stepDiv.innerHTML = `<div class="num">${idx+1}</div><p>${stepText}</p>`;

        const body = document.createElement("div");
        body.className = "question-body";
        const translatedLabel = window.languageManager.translate(q.label);
        const translatedPlaceholder = q.placeholder ? window.languageManager.translate(q.placeholder) : '';
        body.innerHTML = `<div class="question-text">${translatedLabel}</div>
                            ${translatedPlaceholder ? `<div class="question-desc">${translatedPlaceholder}</div>` : ''}`;

        let inputEl;
        if(q.type === "text" || q.type === "email"){
            inputEl = document.createElement("input");
            inputEl.type = q.type === "email" ? "email" : "text";
            inputEl.className = "input";
            inputEl.placeholder = translatedPlaceholder || "";
            inputEl.value = state[q.key] || "";
            inputEl.id = "inputField";
            inputEl.required = !!q.required;
            body.appendChild(inputEl);
        } else if(q.type === "textarea"){
            inputEl = document.createElement("textarea");
            inputEl.className = "input";
            inputEl.placeholder = translatedPlaceholder || "";
            inputEl.rows = 4;
            inputEl.id = "inputField";
            inputEl.value = state[q.key] || "";
            inputEl.required = !!q.required;
            body.appendChild(inputEl);
        } else if(q.type === "select"){
            inputEl = document.createElement("select");
            inputEl.className = "input";
            inputEl.id = "inputField";
            q.options.forEach(opt => {
            const o = document.createElement("option");
            o.value = opt; 
            o.textContent = window.languageManager.translate(opt);
            inputEl.appendChild(o);
            });
            if(state[q.key]) inputEl.value = state[q.key];
            inputEl.required = !!q.required;
            body.appendChild(inputEl);
        } else if(q.type === "multiselect"){
            inputEl = document.createElement("div");
            q.options.forEach(opt => {
            const id = `chk_${q.key}_${opt.replace(/\s+/g,'_')}`;
            const label = document.createElement("label");
            label.style.display="inline-block";
            label.style.marginRight="10px";
            const translatedOpt = window.languageManager.translate(opt);
            label.innerHTML = `<input type="checkbox" id="${id}" value="${opt}" ${ (state[q.key]||[]).includes(opt) ? 'checked' : ''}> ${translatedOpt}`;
            inputEl.appendChild(label);
            });
            body.appendChild(inputEl);
        } else if(q.type === "scale"){
            inputEl = document.createElement("div");
            inputEl.className = "row";
            for(let i=q.min;i<=q.max;i++){
            const id = `scale_${q.key}_${i}`;
            const label = document.createElement("label");
            label.style.display="inline-block"; label.style.textAlign="center";
            label.style.width="40px"; label.innerHTML = `<input type="radio" name="scale_${q.key}" value="${i}" ${ (state[q.key]==i) ? 'checked' : '' }> <div style="margin-top:6px;">${i}</div>`;
            inputEl.appendChild(label);
            }
            body.appendChild(inputEl);
        }

        Qcontainer.appendChild(stepDiv);
        Qcontainer.appendChild(body);

        backBtn.style.visibility = idx === 0 ? "hidden" : "visible";
        skipBtn.style.display = (q.required ? "none" : "inline-block");

        setTimeout(()=> {
            const f = document.getElementById("inputField");
            if(f) f.focus();
        },50);

        updateProgress();
        }

        function collectAnswer(){
        const q = QUESTIONS[currentIndex];
        if(!q) return true;
        let val = null;
        const texts = translations[window.languageManager.currentLang];

        if(q.type === "text" || q.type === "email" || q.type === "textarea" || q.type === "select"){
            const el = document.getElementById("inputField");
            if(!el) return true;
            val = el.value && el.value.trim();
            if(q.required && (!val || val.length === 0)){
            alert(texts.validation_required);
            el.focus();
            return false;
            }
        } else if(q.type === "multiselect"){
            const checkboxes = Qcontainer.querySelectorAll(`input[type="checkbox"]`);
            val = [];
            checkboxes.forEach(cb => { if(cb.checked) val.push(cb.value) });
            if(q.required && (!val || val.length === 0)){
            alert(texts.validation_multiselect);
            return false;
            }
            if(q.maxChoices && val.length > q.maxChoices){
            alert(`${texts.validation_max_choices} ${q.maxChoices} ${texts.validation_max_choices_end}`);
            return false;
            }
        } else if(q.type === "scale"){
            const sel = Qcontainer.querySelector(`input[type="radio"]:checked`);
            if(sel) val = sel.value;
            if(q.required && !val){
            alert(texts.validation_scale);
            return false;
            }
        }

        state[q.key] = val === null ? "" : val;
        return true;
        }

        form.addEventListener("submit", async (ev) => {
        ev.preventDefault();
        const ok = collectAnswer();
        if(!ok) return;

        if(currentIndex < QUESTIONS.length - 1){
            currentIndex++;
            renderQuestion(currentIndex);
        } else {
            await submitSurvey();
        }
        });

        backBtn.addEventListener("click", (e) => {
        e.preventDefault();
        if(currentIndex > 0) { currentIndex--; renderQuestion(currentIndex); }
        });

        skipBtn.addEventListener("click", (e) => {
        e.preventDefault();
        state[QUESTIONS[currentIndex].key] = "";
        if(currentIndex < QUESTIONS.length - 1){
            currentIndex++; renderQuestion(currentIndex);
        } else {
            submitSurvey();
        }
        });

        restart.addEventListener("click", (e) => {
        e.preventDefault();
        location.reload();
        });

        async function submitSurvey(){
        nextBtn.disabled = true;
        backBtn.disabled = true;
        const texts = translations[window.languageManager.currentLang];
        nextBtn.innerHTML = `${texts.sending}...`;

        try {
            const payload = {};
            QUESTIONS.forEach(q => {
            let v = state[q.key];
            if(Array.isArray(v)) v = v.join(" | ");
            payload[q.key] = v || "";
            });
            payload.submitted_at = new Date().toISOString();
            payload.language = window.languageManager.currentLang;

            const res = await fetch(SCRIPT_URL, {
            method: "POST",
            body: new URLSearchParams(payload)
            });

            if(!res.ok){
            const txt = await res.text();
            console.error("Erro no envio:", txt);
            alert(texts.error_send);
            nextBtn.disabled = false; backBtn.disabled = false; 
            nextBtn.innerHTML = `${texts.submit_btn} <i class="fa fa-arrow-right" style="margin-left:10px;"></i>`;
            return;
            }

            form.style.display = "none";
            document.getElementById("thankyou").style.display = "block";
            progressBar.style.width = "100%";

        } catch(err){
            console.error(err);
            alert(texts.error_connection);
            nextBtn.disabled = false; backBtn.disabled = false; 
            nextBtn.innerHTML = `${texts.submit_btn} <i class="fa fa-arrow-right" style="margin-left:10px;"></i>`;
        }
        }

        window.languageManager = new LanguageManager();
        renderQuestion(0);
        updateProgress();
    </script>
</body>
</html>





